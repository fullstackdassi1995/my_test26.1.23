<!DOCTYPE html>
<html lang="en">

<head>
    <title>MY FIRST TEST!</title>
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src='https://kit.fontawesome.com/832db8c202.js' crossorigin='anonymous'></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-2.1.1.js"></script>

<style>

    table { 
       margin-left: 10%;
       margin-top: 20px;
       font-size: large;
    }
    .sweetalert-lg {
        width: 900px;
        margin: 0; }
    .swal2-popup {
        font-size: 1rem !important;   
    }
    .swal2-container {
        zoom: 1;
    }
    th {
        font-family: cursive;
    }
    td {
        font-family: cursive;
    }
    .checked {
  color: orange;
    }
    h1 {
        margin-left: 10%;
    }


    

</style>

</head>

<body class="display-6">


<h1 class="display-4">Result for : TV screen 75 inch: </h1>

    <div class="col-sm-10" class="display-1">
    <table id="tv" class="table table-bordered"  >
        <thead class="thead-dark">
            <tr>
                <th>#</th>
                <th>Icon or image</th>
                <th>Name of the store</th>
                <th>Address</th>
                <th>Price</th>
                <th>Link of the store</th>
                <th>Rating of the place </th>
                <th>Options</th>
            </tr>
        </thead>
        <tbody id="data">

        </tbody>
    </table>
</div>





<script>
    let table = document.getElementById('tv');
    const tv = [{
        icon_or_image: '<a href="https://img.zap.co.il/pics/6/5/8/2/63312856c.gif" target="_blank"><img src="https://img.zap.co.il/pics/2/4/3/1/44601342c.gif" width="120" height="110""></a>',
        name_of_the_store: 'Avi supper' ,
        address:" Alenbi 113 Tel-Aviv </br> <a href='https://www.google.com/maps/dir//%D7%90%D7%9C%D7%A0%D7%91%D7%99+113,+%D7%AA%D7%9C+%D7%90%D7%91%D7%99%D7%91-%D7%99%D7%A4%D7%95%E2%80%AD/@32.0627113,34.8434405,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x151d4c9d4485350b:0xd074affeb37f0a72!2m2!1d34.7734004!2d32.0627307' target='_blank'><i class='fas fa-route' style='font-size:48px;'></i>   "  ,
        price: '₪ 3,990' ,
        link_of_the_store: '<a href="https://www.soferavi.co.il/" target="_blank"><img src="https://img.zap.co.il/pics/imgs/nsite/newui/newssite-9100.gif"></a>',
        rating_of_the_place: '2/5' ,
        int_rank: 2,
        num_price: 3990,
        options: '<button onclick="delete1(1)" class="btn btn-danger" >DELETE</button>  <button onclick="buy1(0)" id="0" class="btn btn-primary">BUY</button>'},
    {
        icon_or_image: '<a href="https://img.zap.co.il/pics/6/5/8/2/63312856c.gif" target="_blank"><img src="https://img.zap.co.il/pics/2/4/3/1/44601342c.gif" width="120" height="110""></a>',
        name_of_the_store: 'Shupersal online' ,
        address: "Hayarden 5 Ramat-Gan </br> <a href='https://www.shufersal.co.il/online/he/iframe-container/corporateBranches' target='_blank'><i class='fas fa-route' style='font-size:48px;'></i>   "  ,
        price: '₪ 3,499 ',
        link_of_the_store:'<a href="https://www.shufersal.co.il/online/" target="_blank"><img src="https://img.zap.co.il/pics/imgs/nsite/newui/newssite-6358.gif"></a>' ,
        int_rank: 4,
        num_price: 3499,
        rating_of_the_place:'4/5' ,
        options:'<button onclick="delete1(2)"  class="btn btn-danger" >DELETE</button> <button onclick="buy1(1)" id="1" class="btn btn-primary">BUY</button>'
    },
        {
        icon_or_image: '<a href="https://img.zap.co.il/pics/6/5/8/2/63312856c.gif" target="_blank"><img src="https://img.zap.co.il/pics/2/4/3/1/44601342c.gif" width="120" height="110""></a>',
        name_of_the_store: 'buy-buy' ,
        address:"Ramat 118 tel-aviv </br> <a href='https://www.google.com/maps/dir//%D7%90%D7%9C%D7%A0%D7%91%D7%99+113,+%D7%AA%D7%9C+%D7%90%D7%91%D7%99%D7%91-%D7%99%D7%A4%D7%95%E2%80%AD/@32.0627113,34.8434405,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x151d4c9d4485350b:0xd074affeb37f0a72!2m2!1d34.7734004!2d32.0627307' target='_blank'><i class='fas fa-route' style='font-size:48px;'></i>  " ,
        price: '₪ 3,189' ,
        num_price: 3189,
        link_of_the_store: '<a href="https://www.buy-buy.co.il/" target="_blank"><img src="https://img.zap.co.il/pics/imgs/nsite/newui/newssite-889.gif"></a>' ,
        int_rank: 5,
        rating_of_the_place: '5/5' ,
        options: '<button onclick="delete1(3)"  class="btn btn-danger" >DELETE</button> <button onclick="buy1(2)" id="2" class="btn btn-primary">BUY</button>'
    },
        {
        icon_or_image: '<a href="https://img.zap.co.il/pics/6/5/8/2/63312856c.gif" target="_blank"><img src="https://img.zap.co.il/pics/2/4/3/1/44601342c.gif" width="120" height="110""></a>',
        name_of_the_store: 'Daily sale' ,
        address: "Hamashor 13 Tveria   </br> <a href='https://www.google.com/maps/dir//%D7%94%D7%9E%D7%A9%D7%95%D7%A8+13,+%D7%98%D7%91%D7%A8%D7%99%D7%94%E2%80%AD/@32.781324,35.5023937,17z/data=!4m8!4m7!1m0!1m5!1m1!1s0x151c3f162a435a45:0x44eae3bef00ff6ea!2m2!1d35.500205!2d32.781324' target='_blank'><i class='fas fa-route' style='font-size:48px;'></i>" ,
        price: '₪ 3,299' ,
        num_price: 3299,
        link_of_the_store: '<a href="https://www.dailysale.co.il/" target="_blank"><img src="https://img.zap.co.il/pics/imgs/nsite/newui/newssite-185.gif"></a>' ,
        int_rank: 1,
        rating_of_the_place: '1/5' ,
        options:'<button onclick="delete1(4)"  class="btn btn-danger" >DELETE</button> <button onclick="buy1(3)" id="3" class="btn btn-primary">BUY</button>'
    }];

    console.log(tv);

    function run_me() {
    let tb = ""
    let id_row = 0
    let n = 1
    tv.forEach(e => {
        tb += `<tr class="num" id= "row${id_row}">
        <td>${n}</td>
        <td class="img" >${e.icon_or_image}</td>
        <td>${e.name_of_the_store}</td>
        <td>${e.address}</td>
        <td>${e.price}</td>
        <td>${e.link_of_the_store}</td>
        <td id="ra${id_row}">${e.rating_of_the_place} </td>
        <td>${e.options}</td>
        </tr>`
        id_row++
        n++
    });
    document.getElementById('data').innerHTML = tb
    }

    function my_sort(){
    const new_table = tv.sort( (tv_a, tv_b) => {
        if (tv_a.int_rank > tv_b.int_rank ){
            return 1
        }
        else if (tv_b.int_rank > tv_a.int_rank ){
            return -1
        }
        else if (tv_a.num_price < tv_b.num_price ){
            return 1
        }
        else{
        return -1
        }
    })
    console.log(tv[tv.length-1]);
    return tv[tv.length-1]
}

    function change_color(){
        for(let i = 1 ; i < table.rows.length ; i++){
        let num =  parseFloat(document.getElementById(`ra${i}`).innerHTML.replace(/,/g,''));
        if (num >= 4){
            document.getElementById(`row${i}`).style.background = 'rgb(61, 190, 61)'
        }
        if (num < 2){
            document.getElementById(`row${i}`).style.background = 'red'
        }
    }

    }

    function average(arr){
        let total = 0
        let price = 0
        for(let i = 1 ; i < table.rows.length ; i++){
            price = table.rows[i].cells[4].innerHTML.replace(/₪/g,'');
            total += parseFloat(price.replace(/,/g,''));
        };
        let average1 = total / arr.length
        console.log(average1);
        return average1
    }

    function buy1(x){
    Swal.fire({
    title: 'To buy',
    html: `<table  class="table table-bordered" > <tr> <td class="col-sm-3"> Name of the store : </td>
        <td class="col-sm-3">${ tv[x].name_of_the_store}</td> </tr>
        <tr> <td>Price:</td>
        <td class="col-sm-3" >${ tv[x].price}</td> </tr>
        <tr> <td class="col-sm-3">Credit Card number : </td>
        <td class="col-sm-2"><input type="number" id="login" class="swal2-input" placeholder="xxxx - xxxx - xxxx - xxxx:"></td> </tr>
        <tr> <td class="col-sm-3"> Date of expiration</td>
        <td class="col-sm-3">${new Date(2)}</td> </tr>   
            `,
    confirmButtonText: 'Send',
    customClass: 'sweetalert-lg'
    })
    }

    function delete1(x){
    delete tv[x-1];
    run_me()
    change_color() 
    }

    function star(){
        for(let i = 1 ; i < table.rows.length ; i++){
            let num =  parseFloat(document.getElementById(`ra${i}`).innerHTML.replace(/,/g,''));
            switch (num) {
                case 1:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star checked"></span><span class="fa fa-star"></span><span class="fa fa-star"></span><span class="fa fa-star"></span><span class="fa fa-star"></span>'
                break;
                case 2:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star"></span><span class="fa fa-star"></span><span class="fa fa-star"></span>'
                break;
                case 3:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star"></span><span class="fa fa-star"></span>'
                break;
                case 4:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star"></span>'
                break;
                case 5:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span><span class="fa fa-star checked"></span>'
                break;
                case 0:
                document.getElementById(`ra${i}`).innerHTML += '<span class="fa fa-star "></span><span class="fa fa-star "></span><span class="fa fa-star "></span><span class="fa fa-star "></span><span class="fa fa-star"></span>'
                break;
                    break;
            }
        }
    }
   
    run_me()
    change_color()
    my_sort()
    star()
    average(tv)


    // tv.forEach(t => {console.log(`RANK ${t.int_rank} PRICE ${t.num_price}`)})

   

    // function change_color(){
    //     tv.forEach(i => {
    //         if (i.int_rank >= 4){
    //             document.getElementById(`row${i}`).style.background = 'rgb(61, 190, 61)'
    //         }
    //         if (i.int_rank <= 1){
    //             document.getElementById(`row${i}`).style.background = 'red'
    //         }
    //     })
    // }
    



    
   
   // better(tv)
    

    

//     function better(arr){
//         const low_price = []
//         for(let i = 1 ; i < table.rows.length ; i++){
//             price = table.rows[i].cells[4].innerHTML.replace(/₪/g,'');
//             low_price.push ( parseFloat(price.replace(/,/g,'')));
//         }
//         let d = (Math.min(...low_price));
//         good(d)
//     }

//     better(tv)

//     function good(x){
//         for(let i = 1 ; i < table.rows.length ; i++){
//             let rating =  parseFloat(document.getElementById(`ra${i}`).innerHTML.replace(/,/g,''));
//             price = table.rows[i].cells[4].innerHTML.replace(/₪/g,'');
//             price =  parseFloat(price.replace(/,/g,''));
//             if (rating >= 4 && price == x){
//                 console.log(table.rows[i]);
//                 return table.rows[i]
//             } 
//         }
// }



    </script>
</body>

</html>